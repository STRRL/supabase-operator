# Helm Repository Index Contract
# This defines the structure of the index.yaml file in the gh-pages branch
# Generated by: helm repo index command
# Location: https://helm.strrl.dev/index.yaml

apiVersion: v1
generated: "2025-11-23T12:00:00Z"  # ISO 8601 timestamp

entries:
  supabase-operator:  # Chart name (must match Chart.yaml name field)
    # Array of versions, newest first
    - apiVersion: v2  # Helm chart API version

      # Required Metadata
      name: supabase-operator
      version: 0.2.0  # Chart version (SemVer)
      appVersion: "0.2.0"  # Application version
      description: Kubernetes operator for deploying self-hosted Supabase instances
      type: application  # application or library

      # Maintainers
      maintainers:
        - name: STRRL
          email: strrl@example.com  # Optional
          url: https://github.com/STRRL  # Optional

      # Repository Links
      home: https://github.com/STRRL/supabase-operator
      sources:
        - https://github.com/STRRL/supabase-operator

      # Keywords for Discovery
      keywords:
        - supabase
        - operator
        - kubernetes
        - postgresql
        - realtime

      # Package Information
      created: "2025-11-23T12:00:00Z"  # Package creation timestamp
      digest: sha256:abcd1234...  # SHA256 of the .tgz file
      urls:
        - https://helm.strrl.dev/supabase-operator-0.2.0.tgz

      # Optional Fields
      icon: https://example.com/icon.png  # Chart icon URL
      deprecated: false  # Mark if deprecated
      annotations:
        # Custom annotations
        artifacthub.io/changes: |
          - Added feature X
          - Fixed bug Y
        artifacthub.io/signKey: |
          fingerprint: ABCD1234
          url: https://example.com/pgp-key.asc

      # Dependencies (if any)
      dependencies:
        - name: postgresql
          version: "12.x.x"
          repository: https://charts.bitnami.com/bitnami
          condition: postgresql.enabled  # Optional condition

    # Previous version entry
    - apiVersion: v2
      name: supabase-operator
      version: 0.1.0
      appVersion: "0.1.0"
      description: Kubernetes operator for deploying self-hosted Supabase instances
      type: application
      maintainers:
        - name: STRRL
      home: https://github.com/STRRL/supabase-operator
      sources:
        - https://github.com/STRRL/supabase-operator
      created: "2025-11-20T10:00:00Z"
      digest: sha256:efgh5678...
      urls:
        - https://helm.strrl.dev/supabase-operator-0.1.0.tgz

# Index Validation Rules:
# 1. Must be valid YAML
# 2. apiVersion must be "v1"
# 3. Each chart entry must have unique version
# 4. URLs must be absolute and accessible
# 5. Digest must match actual file SHA256
# 6. Versions should be in descending order (newest first)
# 7. All required fields must be present

# Generation Command:
# helm repo index . --url https://helm.strrl.dev

# Update Command (preserving existing entries):
# helm repo index . --url https://helm.strrl.dev --merge index.yaml
